{
  "version": 3,
  "names": [
    "useCurveLine",
    "props",
    "strokeColor",
    "strokeWeight",
    "strokeOpacity",
    "strokeStyle",
    "enableMassClear",
    "enableEditing",
    "enableClicking",
    "icons",
    "useMapContext",
    "map",
    "useState",
    "curveLine",
    "setCurveLine",
    "libSDK",
    "window",
    "BMapLib",
    "bMapLib",
    "setBMapLib",
    "loadMapLib",
    "setLoadBMapLib",
    "opts",
    "useMemo",
    "CurveLine",
    "points",
    "path",
    "item",
    "BMap",
    "Point",
    "lng",
    "lat",
    "instance",
    "addOverlay",
    "requireScript",
    "then",
    "newMapLib",
    "Object",
    "assign",
    "catch",
    "setPath",
    "useEffect",
    "JSON",
    "stringify",
    "useVisiable",
    "useEventProperties",
    "useEnableProperties",
    "useProperties"
  ],
  "sources": [
    "../src/useCurveLine.tsx"
  ],
  "sourcesContent": [
    "import { useState, useEffect, useMemo } from 'react';\nimport { useMapContext } from '@uiw/react-baidu-map-map';\nimport { requireScript } from '@uiw/react-baidu-map-utils';\nimport { useEnableProperties, useProperties, useVisiable, useEventProperties } from '@uiw/react-baidu-map-utils';\nimport { CurveLineProps } from '.';\n\nexport interface UseCurveLine extends CurveLineProps {}\n\nexport function useCurveLine(props = {} as UseCurveLine) {\n  const {\n    strokeColor,\n    strokeWeight,\n    strokeOpacity,\n    strokeStyle,\n    enableMassClear,\n    enableEditing = false,\n    enableClicking,\n    icons,\n  } = props;\n  const { map } = useMapContext();\n  const [curveLine, setCurveLine] = useState<BMapLib.CurveLine>();\n  const libSDK = window.BMapLib;\n  const [bMapLib, setBMapLib] = useState<typeof BMapLib>(libSDK);\n  const [loadMapLib, setLoadBMapLib] = useState(false || !!libSDK);\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const opts = {\n    strokeColor,\n    strokeWeight,\n    strokeOpacity,\n    strokeStyle,\n    enableMassClear,\n    enableEditing,\n    enableClicking,\n    icons,\n  };\n  useMemo(() => {\n    // 如果第一次加载，会执行下面的\n    if (map && bMapLib && !curveLine) {\n      if (bMapLib.CurveLine) {\n        const points = (props.path || []).map((item) => new BMap.Point(item.lng, item.lat));\n        const instance = new BMapLib.CurveLine(points, opts);\n        map.addOverlay(instance);\n        setCurveLine(instance);\n      }\n    }\n\n    // 如果 bMapLib 已经加载过，会执行下面的\n    if (map && bMapLib && !bMapLib.CurveLine) {\n      requireScript('//api.map.baidu.com/library/CurveLine/1.5/src/CurveLine.min.js')\n        .then(() => {\n          if (window.BMapLib) {\n            const newMapLib = Object.assign(window.BMapLib, bMapLib);\n            setBMapLib(newMapLib);\n\n            const points = (props.path || []).map((item) => new BMap.Point(item.lng, item.lat));\n            const instance = new BMapLib.CurveLine(points, opts);\n            map.addOverlay(instance);\n            setCurveLine(instance);\n          }\n        })\n        .catch(() => {});\n    }\n\n    // 如果第一次加载，会执行下面的\n    if (!bMapLib && !loadMapLib) {\n      setLoadBMapLib(true);\n      requireScript('//api.map.baidu.com/library/CurveLine/1.5/src/CurveLine.min.js')\n        .then(() => {\n          if (window.BMapLib) {\n            setBMapLib(window.BMapLib);\n          }\n        })\n        .catch(() => {});\n    }\n  }, [map, bMapLib, curveLine, loadMapLib, props.path, opts]);\n\n  const [path, setPath] = useState(props.path || []);\n  useEffect(() => {\n    if (curveLine && props.path && path && JSON.stringify(path) !== JSON.stringify(props.path)) {\n      const points = path.map((item) => new BMap.Point(item.lng, item.lat));\n      curveLine.setPath(points);\n    }\n  }, [curveLine, path, props.path]);\n\n  useVisiable(curveLine!, props);\n  useEventProperties<BMap.Polyline, UseCurveLine>(curveLine!, props, [\n    'Click',\n    'DblClick',\n    'MouseDown',\n    'MouseUp',\n    'MouseOut',\n    'MouseOver',\n    'Remove',\n    'LineUpdate',\n  ]);\n  useEnableProperties<BMapLib.CurveLine, UseCurveLine>(curveLine!, props, ['Editing', 'MassClear']);\n  // PositionAt\n  useProperties<BMapLib.CurveLine, UseCurveLine>(curveLine!, props, [\n    'StrokeColor',\n    'StrokeOpacity',\n    'StrokeWeight',\n    'StrokeStyle',\n  ]);\n\n  return {\n    curveLine,\n    setCurveLine,\n    BMapLib: bMapLib,\n    path,\n    setPath,\n  };\n}\n"
  ],
  "mappings": "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"
}