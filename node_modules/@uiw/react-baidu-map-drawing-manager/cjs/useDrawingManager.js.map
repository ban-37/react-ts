{
  "version": 3,
  "names": [
    "useDrawingManager",
    "props",
    "isOpen",
    "drawingMode",
    "enableDrawingTool",
    "enableCalculate",
    "drawingToolOptions",
    "markerOptions",
    "circleOptions",
    "polylineOptions",
    "polygonOptions",
    "rectangleOptions",
    "useMapContext",
    "map",
    "useState",
    "drawingManager",
    "setDrawingManager",
    "libSDK",
    "window",
    "BMapLib",
    "bMapLib",
    "setBMapLib",
    "loadMapLib",
    "setLoadBMapLib",
    "opts",
    "useMemo",
    "DrawingManager",
    "instance",
    "requireCss",
    "then",
    "requireScript",
    "newMapLib",
    "Object",
    "assign",
    "catch"
  ],
  "sources": [
    "../src/useDrawingManager.tsx"
  ],
  "sourcesContent": [
    "import { useState, useMemo } from 'react';\nimport { useMapContext } from '@uiw/react-baidu-map-map';\nimport { requireScript, requireCss } from '@uiw/react-baidu-map-utils';\nimport { DrawingManagerProps } from '.';\n\nexport interface UseDrawingManager extends DrawingManagerProps {}\n\nexport function useDrawingManager(props = {} as UseDrawingManager) {\n  const {\n    isOpen,\n    drawingMode,\n    enableDrawingTool,\n    enableCalculate,\n    drawingToolOptions,\n    markerOptions,\n    circleOptions,\n    polylineOptions,\n    polygonOptions,\n    rectangleOptions,\n  } = props;\n  const { map } = useMapContext();\n\n  const [drawingManager, setDrawingManager] = useState<BMapLib.DrawingManager>();\n  const libSDK = window.BMapLib;\n  const [bMapLib, setBMapLib] = useState<typeof BMapLib>(libSDK);\n  const [loadMapLib, setLoadBMapLib] = useState(false || !!libSDK);\n  const opts = {\n    isOpen,\n    drawingMode,\n    enableDrawingTool,\n    enableCalculate,\n    drawingToolOptions,\n    markerOptions,\n    circleOptions,\n    polylineOptions,\n    polygonOptions,\n    rectangleOptions,\n  } as BMap.DrawingManagerOptions;\n\n  useMemo(() => {\n    // 如果第一次加载，会执行下面的\n    if (map && bMapLib && !drawingManager) {\n      if (bMapLib.DrawingManager) {\n        const instance = new BMapLib.DrawingManager(map, opts);\n        setDrawingManager(instance);\n      }\n    }\n\n    // 如果 bMapLib 已经加载过，会执行下面的\n    if (map && bMapLib && !bMapLib.DrawingManager) {\n      requireCss('//api.map.baidu.com/library/DrawingManager/1.4/src/DrawingManager_min.css').then(() => {});\n\n      requireScript('//api.map.baidu.com/library/DrawingManager/1.4/src/DrawingManager_min.js')\n        .then(() => {\n          if (window.BMapLib) {\n            const newMapLib = Object.assign(window.BMapLib, bMapLib);\n            setBMapLib(newMapLib);\n\n            const instance = new BMapLib.DrawingManager(map, opts);\n            setDrawingManager(instance);\n          }\n        })\n        .catch(() => {});\n    }\n\n    // 如果第一次加载，会执行下面的\n    if (!bMapLib && !loadMapLib) {\n      setLoadBMapLib(true);\n      requireCss('//api.map.baidu.com/library/DrawingManager/1.4/src/DrawingManager_min.css').then(() => {});\n      requireScript('//api.map.baidu.com/library/DrawingManager/1.4/src/DrawingManager_min.js')\n        .then(() => {\n          if (window.BMapLib) {\n            setBMapLib(window.BMapLib);\n          }\n        })\n        .catch(() => {});\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [map, loadMapLib, bMapLib, drawingManager]);\n\n  return {\n    drawingManager,\n    setDrawingManager,\n    BMapLib: bMapLib,\n  };\n}\n"
  ],
  "mappings": "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"
}