{
  "version": 3,
  "names": [
    "useState",
    "useMemo",
    "useMapContext",
    "requireScript",
    "requireCss",
    "useDrawingManager",
    "props",
    "isOpen",
    "drawingMode",
    "enableDrawingTool",
    "enableCalculate",
    "drawingToolOptions",
    "markerOptions",
    "circleOptions",
    "polylineOptions",
    "polygonOptions",
    "rectangleOptions",
    "map",
    "drawingManager",
    "setDrawingManager",
    "libSDK",
    "window",
    "BMapLib",
    "bMapLib",
    "setBMapLib",
    "loadMapLib",
    "setLoadBMapLib",
    "opts",
    "DrawingManager",
    "instance",
    "then",
    "newMapLib",
    "Object",
    "assign",
    "catch"
  ],
  "sources": [
    "../src/useDrawingManager.tsx"
  ],
  "sourcesContent": [
    "import { useState, useMemo } from 'react';\nimport { useMapContext } from '@uiw/react-baidu-map-map';\nimport { requireScript, requireCss } from '@uiw/react-baidu-map-utils';\nimport { DrawingManagerProps } from '.';\n\nexport interface UseDrawingManager extends DrawingManagerProps {}\n\nexport function useDrawingManager(props = {} as UseDrawingManager) {\n  const {\n    isOpen,\n    drawingMode,\n    enableDrawingTool,\n    enableCalculate,\n    drawingToolOptions,\n    markerOptions,\n    circleOptions,\n    polylineOptions,\n    polygonOptions,\n    rectangleOptions,\n  } = props;\n  const { map } = useMapContext();\n\n  const [drawingManager, setDrawingManager] = useState<BMapLib.DrawingManager>();\n  const libSDK = window.BMapLib;\n  const [bMapLib, setBMapLib] = useState<typeof BMapLib>(libSDK);\n  const [loadMapLib, setLoadBMapLib] = useState(false || !!libSDK);\n  const opts = {\n    isOpen,\n    drawingMode,\n    enableDrawingTool,\n    enableCalculate,\n    drawingToolOptions,\n    markerOptions,\n    circleOptions,\n    polylineOptions,\n    polygonOptions,\n    rectangleOptions,\n  } as BMap.DrawingManagerOptions;\n\n  useMemo(() => {\n    // 如果第一次加载，会执行下面的\n    if (map && bMapLib && !drawingManager) {\n      if (bMapLib.DrawingManager) {\n        const instance = new BMapLib.DrawingManager(map, opts);\n        setDrawingManager(instance);\n      }\n    }\n\n    // 如果 bMapLib 已经加载过，会执行下面的\n    if (map && bMapLib && !bMapLib.DrawingManager) {\n      requireCss('//api.map.baidu.com/library/DrawingManager/1.4/src/DrawingManager_min.css').then(() => {});\n\n      requireScript('//api.map.baidu.com/library/DrawingManager/1.4/src/DrawingManager_min.js')\n        .then(() => {\n          if (window.BMapLib) {\n            const newMapLib = Object.assign(window.BMapLib, bMapLib);\n            setBMapLib(newMapLib);\n\n            const instance = new BMapLib.DrawingManager(map, opts);\n            setDrawingManager(instance);\n          }\n        })\n        .catch(() => {});\n    }\n\n    // 如果第一次加载，会执行下面的\n    if (!bMapLib && !loadMapLib) {\n      setLoadBMapLib(true);\n      requireCss('//api.map.baidu.com/library/DrawingManager/1.4/src/DrawingManager_min.css').then(() => {});\n      requireScript('//api.map.baidu.com/library/DrawingManager/1.4/src/DrawingManager_min.js')\n        .then(() => {\n          if (window.BMapLib) {\n            setBMapLib(window.BMapLib);\n          }\n        })\n        .catch(() => {});\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [map, loadMapLib, bMapLib, drawingManager]);\n\n  return {\n    drawingManager,\n    setDrawingManager,\n    BMapLib: bMapLib,\n  };\n}\n"
  ],
  "mappings": "AAAA,SAASA,QAAQ,EAAEC,OAAO,QAAQ,OAAO;AACzC,SAASC,aAAa,QAAQ,0BAA0B;AACxD,SAASC,aAAa,EAAEC,UAAU,QAAQ,4BAA4B;AAKtE,OAAO,SAASC,iBAAiB,CAACC,KAAK,EAA4B;EAAA,IAAjCA,KAAK;IAALA,KAAK,GAAG,CAAC,CAAC;EAAA;EAC1C,IAAM;IACJC,MAAM;IACNC,WAAW;IACXC,iBAAiB;IACjBC,eAAe;IACfC,kBAAkB;IAClBC,aAAa;IACbC,aAAa;IACbC,eAAe;IACfC,cAAc;IACdC;EACF,CAAC,GAAGV,KAAK;EACT,IAAM;IAAEW;EAAI,CAAC,GAAGf,aAAa,EAAE;EAE/B,IAAM,CAACgB,cAAc,EAAEC,iBAAiB,CAAC,GAAGnB,QAAQ,EAA0B;EAC9E,IAAMoB,MAAM,GAAGC,MAAM,CAACC,OAAO;EAC7B,IAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGxB,QAAQ,CAAiBoB,MAAM,CAAC;EAC9D,IAAM,CAACK,UAAU,EAAEC,cAAc,CAAC,GAAG1B,QAAQ,CAAC,KAAK,IAAI,CAAC,CAACoB,MAAM,CAAC;EAChE,IAAMO,IAAI,GAAG;IACXpB,MAAM;IACNC,WAAW;IACXC,iBAAiB;IACjBC,eAAe;IACfC,kBAAkB;IAClBC,aAAa;IACbC,aAAa;IACbC,eAAe;IACfC,cAAc;IACdC;EACF,CAA+B;EAE/Bf,OAAO,CAAC,MAAM;IACZ;IACA,IAAIgB,GAAG,IAAIM,OAAO,IAAI,CAACL,cAAc,EAAE;MACrC,IAAIK,OAAO,CAACK,cAAc,EAAE;QAC1B,IAAMC,QAAQ,GAAG,IAAIP,OAAO,CAACM,cAAc,CAACX,GAAG,EAAEU,IAAI,CAAC;QACtDR,iBAAiB,CAACU,QAAQ,CAAC;MAC7B;IACF;;IAEA;IACA,IAAIZ,GAAG,IAAIM,OAAO,IAAI,CAACA,OAAO,CAACK,cAAc,EAAE;MAC7CxB,UAAU,CAAC,2EAA2E,CAAC,CAAC0B,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;MAEtG3B,aAAa,CAAC,0EAA0E,CAAC,CACtF2B,IAAI,CAAC,MAAM;QACV,IAAIT,MAAM,CAACC,OAAO,EAAE;UAClB,IAAMS,SAAS,GAAGC,MAAM,CAACC,MAAM,CAACZ,MAAM,CAACC,OAAO,EAAEC,OAAO,CAAC;UACxDC,UAAU,CAACO,SAAS,CAAC;UAErB,IAAMF,SAAQ,GAAG,IAAIP,OAAO,CAACM,cAAc,CAACX,GAAG,EAAEU,IAAI,CAAC;UACtDR,iBAAiB,CAACU,SAAQ,CAAC;QAC7B;MACF,CAAC,CAAC,CACDK,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC;IACpB;;IAEA;IACA,IAAI,CAACX,OAAO,IAAI,CAACE,UAAU,EAAE;MAC3BC,cAAc,CAAC,IAAI,CAAC;MACpBtB,UAAU,CAAC,2EAA2E,CAAC,CAAC0B,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;MACtG3B,aAAa,CAAC,0EAA0E,CAAC,CACtF2B,IAAI,CAAC,MAAM;QACV,IAAIT,MAAM,CAACC,OAAO,EAAE;UAClBE,UAAU,CAACH,MAAM,CAACC,OAAO,CAAC;QAC5B;MACF,CAAC,CAAC,CACDY,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC;IACpB;IACA;EACF,CAAC,EAAE,CAACjB,GAAG,EAAEQ,UAAU,EAAEF,OAAO,EAAEL,cAAc,CAAC,CAAC;EAE9C,OAAO;IACLA,cAAc;IACdC,iBAAiB;IACjBG,OAAO,EAAEC;EACX,CAAC;AACH"
}