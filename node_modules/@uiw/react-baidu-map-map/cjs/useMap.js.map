{
  "version": 3,
  "names": [
    "useMap",
    "props",
    "widget",
    "minZoom",
    "maxZoom",
    "mapType",
    "enableHighResolution",
    "enableAutoResize",
    "enableMapClick",
    "useState",
    "map",
    "setMap",
    "zoom",
    "setZoom",
    "container",
    "setContainer",
    "useContext",
    "Context",
    "dispatch",
    "useMemo",
    "BMap",
    "instance",
    "Map",
    "forEach",
    "item",
    "Control",
    "addControl",
    "control",
    "name",
    "options",
    "clearOverlays",
    "useEffect",
    "undefined",
    "center",
    "setCenter",
    "cent",
    "lng",
    "lat",
    "Point",
    "centerAndZoom",
    "autoLocalCity",
    "setAutoLocalCity",
    "myCity",
    "LocalCity",
    "get",
    "result",
    "level",
    "useEventProperties",
    "useProperties",
    "useEnableProperties"
  ],
  "sources": [
    "../src/useMap.tsx"
  ],
  "sourcesContent": [
    "import { useEffect, useState, useMemo, useContext } from 'react';\nimport { useEnableProperties, useProperties, useEventProperties } from '@uiw/react-baidu-map-utils';\nimport { MapProps } from './';\nimport { Context } from './context';\n\nexport interface OverlayProps extends MapChildProps {\n  /**\n   * 覆盖物是否可见\n   */\n  visiable?: boolean;\n}\n\n/**\n * 此类型是 `<Map>` 组件传递给子组件(如 `<Marker>`)的两个 `props`\n */\nexport interface MapChildProps {\n  /**\n   * 地图API的核心类，SDK加载完成才有\n   */\n  BMap?: typeof BMap;\n  /**\n   * 实例化后的地图对象\n   */\n  map?: BMap.Map;\n}\n\nexport interface UseMap extends MapProps, MapChildProps {}\n\nexport function useMap(props: UseMap = {}) {\n  const { widget, minZoom, maxZoom, mapType, enableHighResolution, enableAutoResize, enableMapClick } = props;\n  const [map, setMap] = useState<BMap.Map>();\n  const [zoom, setZoom] = useState(props.zoom || 15);\n  const [container, setContainer] = useState<HTMLDivElement | null | undefined>(props.container);\n  const { dispatch } = useContext(Context);\n  useMemo(() => {\n    if (container && !map && BMap) {\n      const instance = new BMap.Map(container, {\n        minZoom,\n        maxZoom,\n        mapType,\n        enableHighResolution,\n        enableAutoResize,\n        enableMapClick,\n      });\n      /**\n       * 加载控件\n       */\n      widget &&\n        widget.forEach((item) => {\n          if (!BMap) {\n            return;\n          }\n          if (typeof item === 'string') {\n            const Control = BMap[item] as any;\n            Control && instance.addControl(new Control());\n          } else if (typeof item === 'object' && item.control && typeof item.control === 'function') {\n            instance.addControl(item.control(BMap, instance));\n          } else if (typeof item === 'object' && item.name) {\n            const options = typeof item.options === 'function' ? item.options(BMap, instance) : item.options;\n            const Control = BMap[item.name] as any;\n            Control && instance.addControl(new Control(options));\n          }\n        });\n      setMap(instance);\n    }\n    return () => {\n      if (map) {\n        map.clearOverlays();\n      }\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [container, map]);\n\n  useEffect(() => {\n    if (map && container) {\n      dispatch({ map, container, BMap });\n    }\n    return () => {\n      dispatch({ map: undefined, container: undefined, BMap: undefined });\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [map, container]);\n\n  const [center, setCenter] = useState(props.center || '上海');\n  /**\n   * 根据参数设置中心点\n   */\n  useEffect(() => {\n    if (map && center) {\n      let cent = center;\n      if (center && (center as BMap.Point).lng && (center as BMap.Point).lat) {\n        cent = new BMap.Point((center as BMap.Point).lng, (center as BMap.Point).lat);\n        map.centerAndZoom(cent!, zoom!);\n      }\n      map.centerAndZoom(center, zoom!);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [center, map]);\n\n  const [autoLocalCity, setAutoLocalCity] = useState(props.autoLocalCity);\n  /**\n   * IP定位获取当前城市，进行自动定位\n   */\n  useEffect(() => {\n    if (map && autoLocalCity) {\n      const myCity = new BMap.LocalCity();\n      myCity.get((result) => {\n        setCenter(result.name as any);\n        setZoom(result.level as any);\n        setAutoLocalCity(false);\n      });\n    }\n  }, [autoLocalCity, map]);\n\n  useEventProperties<BMap.Map, UseMap>(map!, props, [\n    'Click',\n    'DblClick',\n    'RightClick',\n    'RightdblClick',\n    'MapTypeChange',\n    'MouseMove',\n    'MouseOver',\n    'MouseOut',\n    'MoveStart',\n    'Moving',\n    'MoveEnd',\n    'ZoomStart',\n    'ZoomEnd',\n    'AddOverlay',\n    'AddControl',\n    'RemoveControl',\n    'RemoveOverlay',\n    'ClearOverlays',\n    'DragStart',\n    'Dragging',\n    'DragEnd',\n    'AddTileLayer',\n    'RemoveTileLayer',\n    'Load',\n    'ReSize',\n    'HotspotClick',\n    'HotspotOver',\n    'HotspotOut',\n    'TilesLoaded',\n    'TouchStart',\n    'TouchMove',\n    'TouchEnd',\n    'LongPress',\n  ]);\n  // 'Center',\n  useProperties<BMap.Map, UseMap>(map!, props, [\n    'DefaultCursor',\n    'DraggingCursor',\n    'MinZoom',\n    'MaxZoom',\n    'MapStyle',\n    'MapStyleV2',\n    'Panorama',\n    'CurrentCity',\n    'MapType',\n    'Viewport',\n    'Zoom',\n  ]);\n  useEnableProperties<BMap.Map, UseMap>(map!, props, [\n    'Dragging',\n    'ScrollWheelZoom',\n    'DoubleClickZoom',\n    'Keyboard',\n    'InertialDragging',\n    'ContinuousZoom',\n    'PinchToZoom',\n    'AutoResize',\n  ]);\n  return {\n    map,\n    setMap,\n    zoom,\n    setZoom,\n    container,\n    setContainer,\n    center,\n    setCenter,\n    autoLocalCity,\n    setAutoLocalCity,\n  };\n}\n"
  ],
  "mappings": "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"
}