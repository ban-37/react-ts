{
  "version": 3,
  "names": [
    "useEffect",
    "useState",
    "useMemo",
    "useContext",
    "useEnableProperties",
    "useProperties",
    "useEventProperties",
    "Context",
    "useMap",
    "props",
    "widget",
    "minZoom",
    "maxZoom",
    "mapType",
    "enableHighResolution",
    "enableAutoResize",
    "enableMapClick",
    "map",
    "setMap",
    "zoom",
    "setZoom",
    "container",
    "setContainer",
    "dispatch",
    "BMap",
    "instance",
    "Map",
    "forEach",
    "item",
    "Control",
    "addControl",
    "control",
    "name",
    "options",
    "clearOverlays",
    "undefined",
    "center",
    "setCenter",
    "cent",
    "lng",
    "lat",
    "Point",
    "centerAndZoom",
    "autoLocalCity",
    "setAutoLocalCity",
    "myCity",
    "LocalCity",
    "get",
    "result",
    "level"
  ],
  "sources": [
    "../src/useMap.tsx"
  ],
  "sourcesContent": [
    "import { useEffect, useState, useMemo, useContext } from 'react';\nimport { useEnableProperties, useProperties, useEventProperties } from '@uiw/react-baidu-map-utils';\nimport { MapProps } from './';\nimport { Context } from './context';\n\nexport interface OverlayProps extends MapChildProps {\n  /**\n   * 覆盖物是否可见\n   */\n  visiable?: boolean;\n}\n\n/**\n * 此类型是 `<Map>` 组件传递给子组件(如 `<Marker>`)的两个 `props`\n */\nexport interface MapChildProps {\n  /**\n   * 地图API的核心类，SDK加载完成才有\n   */\n  BMap?: typeof BMap;\n  /**\n   * 实例化后的地图对象\n   */\n  map?: BMap.Map;\n}\n\nexport interface UseMap extends MapProps, MapChildProps {}\n\nexport function useMap(props: UseMap = {}) {\n  const { widget, minZoom, maxZoom, mapType, enableHighResolution, enableAutoResize, enableMapClick } = props;\n  const [map, setMap] = useState<BMap.Map>();\n  const [zoom, setZoom] = useState(props.zoom || 15);\n  const [container, setContainer] = useState<HTMLDivElement | null | undefined>(props.container);\n  const { dispatch } = useContext(Context);\n  useMemo(() => {\n    if (container && !map && BMap) {\n      const instance = new BMap.Map(container, {\n        minZoom,\n        maxZoom,\n        mapType,\n        enableHighResolution,\n        enableAutoResize,\n        enableMapClick,\n      });\n      /**\n       * 加载控件\n       */\n      widget &&\n        widget.forEach((item) => {\n          if (!BMap) {\n            return;\n          }\n          if (typeof item === 'string') {\n            const Control = BMap[item] as any;\n            Control && instance.addControl(new Control());\n          } else if (typeof item === 'object' && item.control && typeof item.control === 'function') {\n            instance.addControl(item.control(BMap, instance));\n          } else if (typeof item === 'object' && item.name) {\n            const options = typeof item.options === 'function' ? item.options(BMap, instance) : item.options;\n            const Control = BMap[item.name] as any;\n            Control && instance.addControl(new Control(options));\n          }\n        });\n      setMap(instance);\n    }\n    return () => {\n      if (map) {\n        map.clearOverlays();\n      }\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [container, map]);\n\n  useEffect(() => {\n    if (map && container) {\n      dispatch({ map, container, BMap });\n    }\n    return () => {\n      dispatch({ map: undefined, container: undefined, BMap: undefined });\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [map, container]);\n\n  const [center, setCenter] = useState(props.center || '上海');\n  /**\n   * 根据参数设置中心点\n   */\n  useEffect(() => {\n    if (map && center) {\n      let cent = center;\n      if (center && (center as BMap.Point).lng && (center as BMap.Point).lat) {\n        cent = new BMap.Point((center as BMap.Point).lng, (center as BMap.Point).lat);\n        map.centerAndZoom(cent!, zoom!);\n      }\n      map.centerAndZoom(center, zoom!);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [center, map]);\n\n  const [autoLocalCity, setAutoLocalCity] = useState(props.autoLocalCity);\n  /**\n   * IP定位获取当前城市，进行自动定位\n   */\n  useEffect(() => {\n    if (map && autoLocalCity) {\n      const myCity = new BMap.LocalCity();\n      myCity.get((result) => {\n        setCenter(result.name as any);\n        setZoom(result.level as any);\n        setAutoLocalCity(false);\n      });\n    }\n  }, [autoLocalCity, map]);\n\n  useEventProperties<BMap.Map, UseMap>(map!, props, [\n    'Click',\n    'DblClick',\n    'RightClick',\n    'RightdblClick',\n    'MapTypeChange',\n    'MouseMove',\n    'MouseOver',\n    'MouseOut',\n    'MoveStart',\n    'Moving',\n    'MoveEnd',\n    'ZoomStart',\n    'ZoomEnd',\n    'AddOverlay',\n    'AddControl',\n    'RemoveControl',\n    'RemoveOverlay',\n    'ClearOverlays',\n    'DragStart',\n    'Dragging',\n    'DragEnd',\n    'AddTileLayer',\n    'RemoveTileLayer',\n    'Load',\n    'ReSize',\n    'HotspotClick',\n    'HotspotOver',\n    'HotspotOut',\n    'TilesLoaded',\n    'TouchStart',\n    'TouchMove',\n    'TouchEnd',\n    'LongPress',\n  ]);\n  // 'Center',\n  useProperties<BMap.Map, UseMap>(map!, props, [\n    'DefaultCursor',\n    'DraggingCursor',\n    'MinZoom',\n    'MaxZoom',\n    'MapStyle',\n    'MapStyleV2',\n    'Panorama',\n    'CurrentCity',\n    'MapType',\n    'Viewport',\n    'Zoom',\n  ]);\n  useEnableProperties<BMap.Map, UseMap>(map!, props, [\n    'Dragging',\n    'ScrollWheelZoom',\n    'DoubleClickZoom',\n    'Keyboard',\n    'InertialDragging',\n    'ContinuousZoom',\n    'PinchToZoom',\n    'AutoResize',\n  ]);\n  return {\n    map,\n    setMap,\n    zoom,\n    setZoom,\n    container,\n    setContainer,\n    center,\n    setCenter,\n    autoLocalCity,\n    setAutoLocalCity,\n  };\n}\n"
  ],
  "mappings": "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"
}