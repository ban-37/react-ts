{
  "version": 3,
  "names": [
    "useState",
    "useEffect",
    "useMapContext",
    "useProperties",
    "useVisiable",
    "useEventProperties",
    "EVENTS",
    "usePointCollection",
    "props",
    "shape",
    "color",
    "size",
    "map",
    "points",
    "setPoints",
    "pointCollection",
    "setPointCollection",
    "getPoints",
    "data",
    "result",
    "forEach",
    "item",
    "push",
    "BMap",
    "Point",
    "document",
    "createElement",
    "getContext",
    "opts",
    "BMAP_POINT_SIZE_SMALL",
    "BMAP_POINT_SHAPE_WATERDROP",
    "PointCollection",
    "addOverlay",
    "evnetName",
    "name",
    "replace",
    "toLowerCase",
    "addEventListener"
  ],
  "sources": [
    "../src/usePointCollection.ts"
  ],
  "sourcesContent": [
    "import { useState, useEffect } from 'react';\nimport { useMapContext } from '@uiw/react-baidu-map-map';\nimport { useProperties, useVisiable, useEventProperties } from '@uiw/react-baidu-map-utils';\nimport { PointCollectionProps } from './';\n\nconst EVENTS = ['onClick', 'onMouseOver', 'onMouseOut'];\n\nexport interface UsePointCollection extends PointCollectionProps {}\n\nexport function usePointCollection(props = {} as UsePointCollection) {\n  const { shape, color, size } = props;\n  const { map } = useMapContext();\n  const [points, setPoints] = useState(props.points);\n  const [pointCollection, setPointCollection] = useState<BMap.PointCollection>();\n\n  const getPoints = (data: [number, number][] = []) => {\n    const result: BMap.Point[] = [];\n    data.forEach((item) => {\n      result.push(new BMap.Point(item[0], item[1]));\n    });\n    return result;\n  };\n  useEffect(() => {\n    if (!BMap || !map) return;\n    // 判断当前浏览器是否支持绘制海量点\n    if (document && !document.createElement('canvas').getContext) return;\n    const opts = { shape, color, size };\n    if (!pointCollection) {\n      if (!opts.size) opts.size = BMAP_POINT_SIZE_SMALL;\n      if (!opts.shape) opts.shape = BMAP_POINT_SHAPE_WATERDROP;\n      if (!opts.color) opts.color = '#d340c3';\n      const pointCollection = new BMap.PointCollection(getPoints(points), opts);\n      // pointCollection.clear();\n      map.addOverlay(pointCollection);\n      setPointCollection(pointCollection);\n      EVENTS.forEach((evnetName) => {\n        if ((props as any)[evnetName]) {\n          const name = evnetName.replace(/^on/, '').toLowerCase();\n          pointCollection.addEventListener(name, (props as any)[evnetName]);\n        }\n      });\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [map]);\n\n  useEffect(() => {\n    if (pointCollection && points) {\n      // pointCollection.clear();\n      pointCollection.setPoints(getPoints(points));\n    }\n  }, [points, pointCollection]);\n\n  useVisiable(pointCollection!, props);\n  useEventProperties<BMap.PointCollection, UsePointCollection>(pointCollection!, props, [\n    'onClick',\n    'onMouseOver',\n    'onMouseOut',\n  ]);\n  useProperties<BMap.PointCollection, UsePointCollection>(pointCollection!, props, ['Styles']);\n\n  return {\n    pointCollection,\n    setPointCollection,\n    points,\n    setPoints,\n  };\n}\n"
  ],
  "mappings": "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"
}